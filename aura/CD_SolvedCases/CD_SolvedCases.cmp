
<aura:component description="CD_SolvedCases" controller="CD_CasesController">
    <aura:attribute name="solvedCases" type="Case[]"/>
    <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>

    <lightning:layout horizontalAlign="center" verticalAlign="center" multipleRows='true'>
        <aura:if isTrue="{!v.solvedCases.length > 0}">
            <table class="slds-table slds-table_bordered slds-table_cell-buffer slds-m-bottom--small">
                <thead>
                <tr class="slds-text-title_caps">
                    <th scope="col">
                        <div class="slds-truncate" title="Number">Number</div>
                    </th>
                    <th scope="col">
                        <div class="slds-truncate" title="Car">Car</div>
                    </th>
                    <th scope="col">
                        <div class="slds-truncate" title="Subject">Subject</div>
                    </th>
                    <th scope="col">
                        <div class="slds-truncate" title="Description">Description</div>
                    </th>
                    <th scope="col">
                        <div class="slds-truncate" title="Date opened">Date opened</div>
                    </th>
                    <th scope="col">
                        <div class="slds-truncate" title="Date closed">Date closed</div>
                    </th>
                    <th scope="col">
                        <div class="slds-truncate" title="Status">Status</div>
                    </th>
                </tr>
                </thead>
                <tbody>
                <aura:iteration items="{!v.solvedCases}" var="solvedCase" indexVar="index">
                    <tr onclick="{!c.goToCaseDetailPage}" data-caseId="{!solvedCase.Id}">
                        <td data-label="Number">
                            <lightning:formattedText value="{!solvedCase.CaseNumber}"></lightning:formattedText>
                        </td>
                        <td data-label="Number">
                            <lightning:formattedText value="{!solvedCase.CD_Car__r.Name}"></lightning:formattedText>
                        </td>
                        <td data-label="Subject">
                            <lightning:formattedText value="{!solvedCase.Subject}"></lightning:formattedText>
                        </td>
                        <td data-label="Description">
                            <lightning:formattedText value="{!solvedCase.Description}"></lightning:formattedText>
                        </td>
                        <td data-label="Date opened">
                            <lightning:formattedDateTime value="{!solvedCase.CreatedDate}"></lightning:formattedDateTime>
                        </td>
                        <td data-label="Date closed">
                            <lightning:formattedDateTime value="{!solvedCase.ClosedDate}"></lightning:formattedDateTime>
                        </td>
                        <td data-label="Status">
                            <lightning:formattedText value="{!solvedCase.Status}"></lightning:formattedText>
                        </td>
                    </tr>
                </aura:iteration>
                </tbody>
            </table>

            <aura:set attribute="else">
                <lightning:layoutItem class="slds-align_absolute-center" flexibility="auto" padding="around-small">
                    <ui:outputText value="No solved cases found" />
                </lightning:layoutItem>
            </aura:set>
        </aura:if>
    </lightning:layout>

</aura:component>
